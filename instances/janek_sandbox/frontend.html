<script>

	// PRODUCTION
	// loadCSS("https://cdn.rawgit.com/qwerty1829/moodle-frontend/master/frontend.css"); 
	// DEVELOPMENT
	loadCSS("https://rawgit.com/qwerty1829/moodle-frontend/master/instances/janek_sandbox/frontend.css");
	// LOCAL
	// loadCSS("frontend.css");

	// loads in icons to use in HTML
	loadCSS("https://cdn.rawgit.com/qwerty1829/moodle-frontend/master/assets/fonts/ELCicons/css/ELCicons.css");

	loadCSS("https://fonts.googleapis.com/css?family=Open+Sans");

	function loadCSS(url){
		console.log(url);
		var head = document.getElementsByTagName('head')[0],
   		link = document.createElement('link');
		link.type = 'text/css';
   		link.rel = 'stylesheet';
   		link.href = url;
   		head.appendChild(link);
   		return link;
	}

</script>

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/headjs/1.0.3/head.core.min.js" type="text/javascript"></script> -->

<script>

	// enter the location of what you want to replace the logo with
	// drawLogo("https://keats.kcl.ac.uk/pluginfile.php/2038040/mod_resource/content/3/hank.png");

	// enter the string you want it to contain and then the location of the image to replace with.
	// replaceFileIcons("hank","https://keats.kcl.ac.uk/pluginfile.php/2038040/mod_resource/content/3/hank.png");
	// replaceFileIcons("lesson", "https://rawgit.com/qwerty1829/moodle-frontend/master/icons/iLesson.png");
	 replaceFileIconsCSS("Gallery", "a");
	 replaceFileIconsCSS("Read", "https://cdn.rawgit.com/qwerty1829/moodle-frontend/master/assets/icons/writing.png");
	 replaceFileIconsCSS("Live", "https://cdn.rawgit.com/qwerty1829/moodle-frontend/master/assets/icons/writing.png");
	 replaceFileIconsCSS("Grammar", "https://cdn.rawgit.com/qwerty1829/moodle-frontend/master/assets/icons/writing.png");

	// browserType();

	// // run at start to ensure all accordions are consistently closed. Comment out both lines to remove
	// closeOtherAccordions(this);
	// $(document).on('click', 'ul.topics>li', function(){ closeOtherAccordions(this); });

	function replaceProgressBar(){
	console.log($(".progressBarProgressTable"));
	var numElements = $(".progressBarCell").size();
	var completedElements = 0;
	console.log(numElements);
		$(".progressBarCell").each(function(index){
			if($(this).css("background-color") == "rgb(115, 168, 57)"){
				completedElements++;
			}
			$(this).css("background-color","transparent");
			// $(this).css("background","url('https://keats.kcl.ac.uk/pluginfile.php/2038040/mod_resource/content/3/hank.png')");
		});
		var percentComplete = (completedElements/numElements)*160 + '%';
		console.log(percentComplete);
		$(".progressBarProgressTable").css("background","url('https://rawgit.com/qwerty1829/moodle-frontend/master/assets/images/progress_bg.png')");
		$(".progressBarProgressTable").css("background-size", "contain");
		$(".progressBarProgressTable").css("background-repeat", "no-repeat");
		$(".progressBarProgressTable").css("position", "relative");
		$(".progressBarProgressTable").css("height", 70);
		$(".progressBarHeader").css('display',"none")
		var bus = $("<img class='completition' src='https://rawgit.com/qwerty1829/moodle-frontend/master/assets/images/progress_bus.png'/>");
		$(".progressBarProgressTable").prepend(bus);
		$(".completition").css("left", 100%);
		$(".completition").css("position", "absolute");
		$(".completition").css("width", 40);
		$(".completition").css("top", 30);
		$(".completition").css("margin-left", -70);
		$(".completition").css("text-align", "left");
		console.log($(".completition").css("left");
}
    

function replaceFileIcons(name, location) {
	$(".activityinstance").each(function(index, value){
		var instanceName = $(value).eq(0).text();
		if(instanceName.indexOf(name) !== -1){
			var iconImage = $(this).find("img");
			$(iconImage.first().attr("src",location));
		}
	});
}

function replaceFileIconsCSS(name, code) {
	$(".activityinstance").each(function(index, value){
		var instanceName = $(value).eq(0).text();
		if(instanceName.indexOf(name) !== -1){
			$(this).find("img").css('display','none')
			var icon = $("<i class=\"icon-" + code + " iconlarge\"/>");;
			$(this).find('.instancename').css('position','absolute');
			$(this).find('.instancename').css('top','25px');
			$(this).prepend(icon);
		}
	});	
}

function closeOtherAccordions(context){
	$('ul.topics>li').each(function(index) {
		if(this != context) {
			$('.sectionopen').addClass('sectionclosed').removeClass('sectionopen');
			$('.toggle_open').addClass('toggle_closed').removeClass('toggle_open');
		}
	});
}

function browserType() {
	console.log(head.browser.chrome);
}

function drawLogo(location) {
	var logo = $(".logo").children();
	logo.attr("src", location);
	logo.css("width", 50).css("height", 50);
}
</script>